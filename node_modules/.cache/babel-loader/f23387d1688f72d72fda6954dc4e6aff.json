{"ast":null,"code":"import _slicedToArray from\"C:/Users/frith/Google Drive/Dev/assessment-sfm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect}from\"react\";import{useStateValue}from\"./StateProvider\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import\"../css/Answer.css\";function Answer(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),_useStateValue2$=_useStateValue2[0],questionNum=_useStateValue2$.questionNum,test=_useStateValue2$.test,answers=_useStateValue2$.answers,recommended=_useStateValue2$.recommended,submit=_useStateValue2$.submit,contactId=_useStateValue2$.contactId,dispatch=_useStateValue2[1];var history=useHistory();// Fill array of answers with another array of temporary 0's\nvar handleEmptyArray=function handleEmptyArray(){var array=[];for(var i=0;i<test.answers[questionNum-1].options.length;i++){array.push(0);}return array;};// Inverts & updates the multi answer array from previous value\nvar handleMultiAnswer=function handleMultiAnswer(array,i){if(array[i]===0){array[i]=1;}else{array[i]=0;}return array;};// Handle POST submission after recommended array is updated & redirects user to results\nuseEffect(function(){if(recommended!==null){var handleSubmit=function handleSubmit(){// Change Post URL\nif(contactId){if(sessionStorage.getItem(\"sessionContactId\")){if(sessionStorage.getItem(\"sessionTest\")){axios.post(\"https://scrapthe9to5.com/scripts/IS/ISVaultAssessment.php?assessment=\".concat(sessionStorage.getItem(\"sessionTest\")),{contactId:sessionStorage.getItem(\"sessionContactId\"),recommended:recommended,answers:answers}).then(function(res){console.log(res);});}else{console.log(\"Session test was not recorded...\");}}else{console.log(\"Session contactId was not recorded...\");}}else{console.log(\"Session contactId was not stored...\");}history.push(\"/result\");};handleSubmit();}},[recommended,answers,history,contactId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"answer\",children:[!submit?/*#__PURE__*/_jsx(\"div\",{className:\"answer-container\",children:test.answers[questionNum-1].options.map(function(option,i){var _answers;return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){// Single Answer Questions\nif(test.answers[questionNum-1].select===\"single\"){dispatch({type:\"ANSWER\",answer:i+1});dispatch({type:\"NEXT_QUESTION\"});}// Multi Answer Questions\nelse if(test.answers[questionNum-1].select===\"multi\"){var array=answers[questionNum-1];// Handle Empty Multi Answer Array\nif(!array){array=handleEmptyArray();}// Handle Multi Answer Array\narray=handleMultiAnswer(array,i);// Apply New Answer Array to DataLayer\ndispatch({type:\"ANSWER\",answer:array});}},className:\"\".concat(test.answers[questionNum-1].select===\"multi\"?\"answer-optionMulti\":\"answer-optionSingle\",\"\\n              \").concat(((_answers=answers[questionNum-1])===null||_answers===void 0?void 0:_answers.length)>1?answers[questionNum-1][i]===1?\"answer--selected\":\"\":answers[questionNum-1]===i+1?\"answer--selected\":\"\",\"\\n              \"),children:option},i);})}):null,submit?/*#__PURE__*/_jsx(\"div\",{className:\"answer-submit\",children:/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return dispatch({type:\"SUBMIT\"});},className:\"answer-submitButton\",children:\"Submit Answers\"})}):null]});}export default Answer;","map":{"version":3,"sources":["C:/Users/frith/Google Drive/Dev/assessment-sfm/src/components/Answer.js"],"names":["React","useEffect","useStateValue","useHistory","axios","Answer","questionNum","test","answers","recommended","submit","contactId","dispatch","history","handleEmptyArray","array","i","options","length","push","handleMultiAnswer","handleSubmit","sessionStorage","getItem","post","then","res","console","log","map","option","select","type","answer"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"../css/Answer.css\";\r\n\r\nfunction Answer() {\r\n  const [\r\n    { questionNum, test, answers, recommended, submit, contactId },\r\n    dispatch,\r\n  ] = useStateValue();\r\n  const history = useHistory();\r\n\r\n  // Fill array of answers with another array of temporary 0's\r\n  const handleEmptyArray = () => {\r\n    let array = [];\r\n    for (let i = 0; i < test.answers[questionNum - 1].options.length; i++) {\r\n      array.push(0);\r\n    }\r\n    return array;\r\n  };\r\n\r\n  // Inverts & updates the multi answer array from previous value\r\n  const handleMultiAnswer = (array, i) => {\r\n    if (array[i] === 0) {\r\n      array[i] = 1;\r\n    } else {\r\n      array[i] = 0;\r\n    }\r\n\r\n    return array;\r\n  };\r\n\r\n  // Handle POST submission after recommended array is updated & redirects user to results\r\n  useEffect(() => {\r\n    if (recommended !== null) {\r\n      const handleSubmit = () => {\r\n        // Change Post URL\r\n        if (contactId) {\r\n          if (sessionStorage.getItem(\"sessionContactId\")) {\r\n            if (sessionStorage.getItem(\"sessionTest\")) {\r\n              axios\r\n                .post(\r\n                  `https://scrapthe9to5.com/scripts/IS/ISVaultAssessment.php?assessment=${sessionStorage.getItem(\r\n                    \"sessionTest\"\r\n                  )}`,\r\n                  {\r\n                    contactId: sessionStorage.getItem(\"sessionContactId\"),\r\n                    recommended: recommended,\r\n                    answers: answers,\r\n                  }\r\n                )\r\n                .then((res) => {\r\n                  console.log(res);\r\n                });\r\n            } else {\r\n              console.log(\"Session test was not recorded...\");\r\n            }\r\n          } else {\r\n            console.log(\"Session contactId was not recorded...\");\r\n          }\r\n        } else {\r\n          console.log(\"Session contactId was not stored...\");\r\n        }\r\n        history.push(\"/result\");\r\n      };\r\n      handleSubmit();\r\n    }\r\n  }, [recommended, answers, history, contactId]);\r\n\r\n  return (\r\n    <div className=\"answer\">\r\n      {!submit ? (\r\n        <div className=\"answer-container\">\r\n          {test.answers[questionNum - 1].options.map((option, i) => (\r\n            <div\r\n              key={i}\r\n              onClick={() => {\r\n                // Single Answer Questions\r\n                if (test.answers[questionNum - 1].select === \"single\") {\r\n                  dispatch({ type: \"ANSWER\", answer: i + 1 });\r\n                  dispatch({ type: \"NEXT_QUESTION\" });\r\n                }\r\n\r\n                // Multi Answer Questions\r\n                else if (test.answers[questionNum - 1].select === \"multi\") {\r\n                  let array = answers[questionNum - 1];\r\n\r\n                  // Handle Empty Multi Answer Array\r\n                  if (!array) {\r\n                    array = handleEmptyArray();\r\n                  }\r\n\r\n                  // Handle Multi Answer Array\r\n                  array = handleMultiAnswer(array, i);\r\n\r\n                  // Apply New Answer Array to DataLayer\r\n                  dispatch({\r\n                    type: \"ANSWER\",\r\n                    answer: array,\r\n                  });\r\n                }\r\n              }}\r\n              className={`${\r\n                test.answers[questionNum - 1].select === \"multi\"\r\n                  ? \"answer-optionMulti\"\r\n                  : \"answer-optionSingle\"\r\n              }\r\n              ${\r\n                answers[questionNum - 1]?.length > 1\r\n                  ? answers[questionNum - 1][i] === 1\r\n                    ? \"answer--selected\"\r\n                    : \"\"\r\n                  : answers[questionNum - 1] === i + 1\r\n                  ? \"answer--selected\"\r\n                  : \"\"\r\n              }\r\n              `}\r\n            >\r\n              {option}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : null}\r\n      {submit ? (\r\n        <div className=\"answer-submit\">\r\n          <div\r\n            onClick={() => dispatch({ type: \"SUBMIT\" })}\r\n            className=\"answer-submitButton\"\r\n          >\r\n            Submit Answers\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Answer;\r\n"]},"metadata":{},"sourceType":"module"}